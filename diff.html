

    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Diff</title>
        <style type="text/css">
.field {
    margin: 0;
}
.main-field {
    width: auto;
    white-space: pre;
}

.main-field > * {
    overflow: hidden;
    border: black 3px solid;
    border-radius: 1.2rem;
    width: 30%;
    margin: 1rem;
    padding: 0.5rem;
    background-color: #ececec;
}

.changed-text-old {
    display: inline;
    background-color: #a2c1fd;
}

.changed-text-new {
    display: inline;
    background-color: #a2fdf2;
}

.deleted-text {
    display: inline;
    background-color: #acacac;
}
.added-text {
    display: inline;
    background-color: #b0ff83;
}

.old-text {
    display: inline;
    background-color: #ececec;
}
        </style>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
              integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
              crossorigin="anonymous">
    </head>
    <body>
    <header>

    </header>
    <div class="middle">
        <div class="main-field d-flex justify-content-center">
            <div class="old-field">
                private static void writeToHtml(StringType[][] typesOfString,
                                    List<String> oldLines,
                                    List<String> newLines) {
        int curI = oldLines.size(), curJ = newLines.size();
        ArrayList<String> diffText = new ArrayList<>();
        while (curI != 0 || curJ != 0) {
            StringType stringType = typesOfString[curI][curJ];
            switch (stringType) {
                case OLD -> {
                    diffText.add(getHtmlElement(oldLines.get(curI - 1), stringType));
                    curI--;
                    curJ--;
                }
                case CHANGED -> {
                    diffText.add(getHtmlElement(newLines.get(curJ - 1), stringType));
                    diffText.add(getHtmlElement(oldLines.get(curI - 1), stringType));
                    curI--;
                    curJ--;
                }
                case ADDED -> {
                    diffText.add(getHtmlElement(oldLines.get(curJ - 1), stringType));
                    curJ--;
                }
                case DELETED -> {
                    diffText.add(getHtmlElement(oldLines.get(curI - 1), stringType));
                    curI--;
                }
            }
        }
        Collections.reverse(diffText);
        renderHtml(collectionsToString(oldLines),
                collectionsToString(diffText),
                collectionsToString(newLines));
    }
}
            </div>
            <div class="diff-field d-flex flex-column">
                <div class="old-text d-flex">private static void writeToHtml(StringType[][] typesOfString,</div>
<div class="deleted-text d-flex">                                    List<String> oldLines,</div>
<div class="old-text d-flex">                                    List<String> newLines) {</div>
<div class="changed-text-new d-flex">        int curI = oldLines.size(), curJ = newLines.size();</div>
<div class="changed-text-old d-flex">        int curI = oldLines.size() + 1, curJ = newLines.size() + 1;</div>
<div class="old-text d-flex">        ArrayList<String> diffText = new ArrayList<>();</div>
<div class="old-text d-flex">        while (curI != 0 || curJ != 0) {</div>
<div class="old-text d-flex">            StringType stringType = typesOfString[curI][curJ];</div>
<div class="old-text d-flex">            switch (stringType) {</div>
<div class="old-text d-flex">                case OLD -> {</div>
<div class="old-text d-flex">                    diffText.add(getHtmlElement(oldLines.get(curI - 1), stringType));</div>
<div class="added-text d-flex">                    // two lines below changed</div>
<div class="changed-text-new d-flex">                    curI--;</div>
<div class="changed-text-new d-flex">                    curJ--;</div>
<div class="changed-text-old d-flex">                    curI++;</div>
<div class="changed-text-old d-flex">                    curJ++;</div>
<div class="old-text d-flex">                }</div>
<div class="old-text d-flex">                case CHANGED -> {</div>
<div class="old-text d-flex">                    diffText.add(getHtmlElement(newLines.get(curJ - 1), stringType));</div>
<div class="old-text d-flex">                    diffText.add(getHtmlElement(oldLines.get(curI - 1), stringType));</div>
<div class="old-text d-flex">                    curI--;</div>
<div class="old-text d-flex">                    curJ--;</div>
<div class="old-text d-flex">                }</div>
<div class="old-text d-flex">                case ADDED -> {</div>
<div class="old-text d-flex">                    diffText.add(getHtmlElement(oldLines.get(curJ - 1), stringType));</div>
<div class="old-text d-flex">                    curJ--;</div>
<div class="deleted-text d-flex">                }</div>
<div class="deleted-text d-flex">                case DELETED -> {</div>
<div class="deleted-text d-flex">                    diffText.add(getHtmlElement(oldLines.get(curI - 1), stringType));</div>
<div class="deleted-text d-flex">                    curI--;</div>
<div class="old-text d-flex">                }</div>
<div class="old-text d-flex">            }</div>
<div class="old-text d-flex">        }</div>
<div class="changed-text-new d-flex">        Collections.reverse(diffText);</div>
<div class="changed-text-old d-flex">        Collections.shuffle(diffText);</div>
<div class="old-text d-flex">        renderHtml(collectionsToString(oldLines),</div>
<div class="old-text d-flex">                collectionsToString(diffText),</div>
<div class="old-text d-flex">                collectionsToString(newLines));</div>
<div class="old-text d-flex">    }</div>
<div class="old-text d-flex">}</div>
            </div>
            <div class="new-field">
                private static void writeToHtml(StringType[][] typesOfString,
                                    List<String> newLines) {
        int curI = oldLines.size() + 1, curJ = newLines.size() + 1;
        ArrayList<String> diffText = new ArrayList<>();
        while (curI != 0 || curJ != 0) {
            StringType stringType = typesOfString[curI][curJ];
            switch (stringType) {
                case OLD -> {
                    diffText.add(getHtmlElement(oldLines.get(curI - 1), stringType));
                    // two lines below changed
                    curI++;
                    curJ++;
                }
                case CHANGED -> {
                    diffText.add(getHtmlElement(newLines.get(curJ - 1), stringType));
                    diffText.add(getHtmlElement(oldLines.get(curI - 1), stringType));
                    curI--;
                    curJ--;
                }
                case ADDED -> {
                    diffText.add(getHtmlElement(oldLines.get(curJ - 1), stringType));
                    curJ--;
                }
            }
        }
        Collections.shuffle(diffText);
        renderHtml(collectionsToString(oldLines),
                collectionsToString(diffText),
                collectionsToString(newLines));
    }
}
            </div>
        </div>
    </div>
    <footer>

    </footer>
    </body>
    </html>
